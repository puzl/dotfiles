#!/bin/bash
function hostify()
{
    local RC=$1
    if [[ -e ~/.bash.d/$RC.$(hostname) ]]; then
        source ~/.bash.d/$RC.$(hostname)
    fi
    if [[ ! -z "$CC_VIEW_SPEC" ]]; then
        if [[ -e ~/.bash.d/$RC.clearcase ]]; then
            source ~/.bash.d/$RC.clearcase
        fi
    fi
}

function add_to_path
{
    if [[ "${!1}" =~ "(^|:)"${2}"(:|$)" ]]
    then
        return 0
    fi
    export $1="$2:${!1}"
}

function ps1() 
{ 
    GREEN='\[\033[0;32;1m\]'
    BLUE='\[\033[0;36;1m\]'

    PS1="\[\e[7m\]\[\e[0m\]${GREEN}\[\e[1m\]\W\[\e[0m\] \!\$\[\e[0m\] "
}

function fgrep()
{
    case $# in 
        1)
            DIR=.
            EXPR=$1
            ;;
        2)
            DIR=$1
            EXPR=$2
            ;;
        *)
            echo "Usage: $0 [directory] <expression>"
            return 1;
            ;;
    esac

    find ${DIR} -type d -path obj -prune -o -type f -name \*[cph]   | xargs egrep "$EXPR"
}

function figrep()
{
    case $# in 
        1)
            DIR=.
            EXPR=$1
            ;;
        2)
            DIR=$1
            EXPR=$2
            ;;
        *)
            echo "Usage: $0 [directory] <expression>"
            return 1;
            ;;
    esac

    find ${DIR} -type d -path obj -prune -o -type f -name \*[cph]   | xargs egrep -i "$EXPR"
}

function title()
{
    echo -ne "\033]2;$*\007"
}

#function settitle()
#{
#    if [[ -z "$CC_VIEW_SPEC" ]]; then
#        title "$HOSTNAME :: $PWD"
#    else
#        title "$(cleartool pwv -s) :: $HOSTNAME :: $PWD :: "
#    fi
#}
#export PROMPT_COMMAND=settitle

function emacs()
{
    if [[ $# == 0 ]]; then
        $(cygpath c:\\)/emacs-24.4.51-windows-x64/bin/runemacs.exe
    else
        if [[ $OSTYPE = "cygwin" ]]; then
            exec emacsclient -q --no-wait "$@" &
        else
            exec emacs
        fi
    fi
}

hostify bash_funcs
